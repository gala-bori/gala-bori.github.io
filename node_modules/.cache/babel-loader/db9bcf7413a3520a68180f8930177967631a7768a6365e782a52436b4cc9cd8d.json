{"ast":null,"code":"import _slicedToArray from\"/home/user/Documents/gala-bori/gala-bori.github.io/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var API_URL=\"http://sefdb02.qut.edu.au:3000\";function Register(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var register=function register(){var url=\"\".concat(API_URL,\"/user/register\");return fetch(url,{//Function to POST email/password and register account if appropriate\nmethod:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email:email,password:password})}).then(function(res){if(res.status===201){return res.json().then(function(){alert(\"User account created, please Login!\");window.location.replace(\"./login\");// redirect to the login page\n});}else if(res.status===400){throw new Error(\"Both email and password are required\");}else if(res.status===409){throw new Error(\"User already exists\");}else if(res.status===429){throw new Error(\"Too many requests, please try again later.\");}else{throw new Error(\"Registration failed\");}}).then(function(){}).catch(function(error){alert(error.message);//Alert/log any other errors...\nconsole.log(error);});};var handleEmailChange=function handleEmailChange(x){//Functions to set data when requested by submission below\nsetEmail(x.target.value);};var handlePasswordChange=function handlePasswordChange(x){setPassword(x.target.value);};var handleSubmit=function handleSubmit(x){x.preventDefault();register();};return/*#__PURE__*/ (//Renders two input forms and submit button\n_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Register\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"register-form\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:email,onChange:handleEmailChange,className:\"form-control custom-input\",style:{width:\"300px\"}}),/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"br\",{}),\"Password:\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:handlePasswordChange,className:\"form-control custom-input\",style:{width:\"300px\"}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Register\"})]})]}));}export default Register;","map":{"version":3,"names":["useState","jsx","_jsx","jsxs","_jsxs","API_URL","Register","_useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","password","setPassword","register","url","concat","fetch","method","headers","body","JSON","stringify","then","res","status","json","alert","window","location","replace","Error","catch","error","message","console","log","handleEmailChange","x","target","value","handlePasswordChange","handleSubmit","preventDefault","className","children","onSubmit","type","onChange","style","width"],"sources":["/home/user/Documents/gala-bori/gala-bori.github.io/src/authentification/Register.js"],"sourcesContent":["import { useState } from \"react\";\n\nconst API_URL = `http://sefdb02.qut.edu.au:3000`;\n\nfunction Register() {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n\n  const register = () => {\n    const url = `${API_URL}/user/register`;\n\n    return fetch(url, { //Function to POST email/password and register account if appropriate\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({ email, password }),\n    })\n      .then((res) => {\n        if (res.status === 201) {\n          return res.json().then(() => {\n            alert(\"User account created, please Login!\");\n            window.location.replace(\"./login\"); // redirect to the login page\n          });\n        } else if (res.status === 400) {\n          throw new Error(\"Both email and password are required\");\n        } else if (res.status === 409) {\n          throw new Error(\"User already exists\");\n        } else if (res.status === 429) {\n          throw new Error(\"Too many requests, please try again later.\");\n        } else {\n          throw new Error(\"Registration failed\");\n        }\n      }).then(() => { \n      })\n      .catch((error) => {\n        alert(error.message); //Alert/log any other errors...\n        console.log(error);\n      });\n  };\n\n  const handleEmailChange = (x) => { //Functions to set data when requested by submission below\n    setEmail(x.target.value);\n  };\n\n  const handlePasswordChange = (x) => {\n    setPassword(x.target.value);\n  };\n\n  const handleSubmit = (x) => {\n    x.preventDefault();\n    register();\n  };\n\n  return ( //Renders two input forms and submit button\n    <div className=\"App\">\n      <h1>Register</h1>\n      <form onSubmit={handleSubmit} className=\"register-form\">\n        <label>Email:</label>\n        <input\n          type=\"email\"\n          value={email}\n          onChange={handleEmailChange}\n          className=\"form-control custom-input\"\n          style={{ width: \"300px\" }} \n        />\n        <label><br />Password:</label>\n        <input\n          type=\"password\"\n          value={password}\n          onChange={handlePasswordChange}\n          className=\"form-control custom-input\"\n          style={{ width: \"300px\" }}\n        />\n        <br />\n        <button type=\"submit\" className=\"btn btn-primary\">Register</button>\n      </form>\n    </div>\n  );\n}\n\nexport default Register;\n"],"mappings":"wIAAA,OAASA,QAAQ,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEjC,GAAM,CAAAC,OAAO,iCAAmC,CAEhD,QAAS,CAAAC,QAAQA,CAAA,CAAG,CAClB,IAAAC,SAAA,CAA0BP,QAAQ,CAAC,EAAE,CAAC,CAAAQ,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA/BG,KAAK,CAAAF,UAAA,IAAEG,QAAQ,CAAAH,UAAA,IACtB,IAAAI,UAAA,CAAgCZ,QAAQ,CAAC,EAAE,CAAC,CAAAa,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAArCE,QAAQ,CAAAD,UAAA,IAAEE,WAAW,CAAAF,UAAA,IAE5B,GAAM,CAAAG,QAAQ,CAAG,QAAX,CAAAA,QAAQA,CAAA,CAAS,CACrB,GAAM,CAAAC,GAAG,IAAAC,MAAA,CAAMb,OAAO,kBAAgB,CAEtC,MAAO,CAAAc,KAAK,CAACF,GAAG,CAAE,CAAE;AAClBG,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEd,KAAK,CAALA,KAAK,CAAEI,QAAQ,CAARA,QAAS,CAAC,CAC1C,CAAC,CAAC,CACCW,IAAI,CAAC,SAACC,GAAG,CAAK,CACb,GAAIA,GAAG,CAACC,MAAM,GAAK,GAAG,CAAE,CACtB,MAAO,CAAAD,GAAG,CAACE,IAAI,EAAE,CAACH,IAAI,CAAC,UAAM,CAC3BI,KAAK,CAAC,qCAAqC,CAAC,CAC5CC,MAAM,CAACC,QAAQ,CAACC,OAAO,CAAC,SAAS,CAAC,CAAE;AACtC,CAAC,CAAC,CACJ,CAAC,IAAM,IAAIN,GAAG,CAACC,MAAM,GAAK,GAAG,CAAE,CAC7B,KAAM,IAAI,CAAAM,KAAK,CAAC,sCAAsC,CAAC,CACzD,CAAC,IAAM,IAAIP,GAAG,CAACC,MAAM,GAAK,GAAG,CAAE,CAC7B,KAAM,IAAI,CAAAM,KAAK,CAAC,qBAAqB,CAAC,CACxC,CAAC,IAAM,IAAIP,GAAG,CAACC,MAAM,GAAK,GAAG,CAAE,CAC7B,KAAM,IAAI,CAAAM,KAAK,CAAC,4CAA4C,CAAC,CAC/D,CAAC,IAAM,CACL,KAAM,IAAI,CAAAA,KAAK,CAAC,qBAAqB,CAAC,CACxC,CACF,CAAC,CAAC,CAACR,IAAI,CAAC,UAAM,CACd,CAAC,CAAC,CACDS,KAAK,CAAC,SAACC,KAAK,CAAK,CAChBN,KAAK,CAACM,KAAK,CAACC,OAAO,CAAC,CAAE;AACtBC,OAAO,CAACC,GAAG,CAACH,KAAK,CAAC,CACpB,CAAC,CAAC,CACN,CAAC,CAED,GAAM,CAAAI,iBAAiB,CAAG,QAApB,CAAAA,iBAAiBA,CAAIC,CAAC,CAAK,CAAE;AACjC7B,QAAQ,CAAC6B,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAC1B,CAAC,CAED,GAAM,CAAAC,oBAAoB,CAAG,QAAvB,CAAAA,oBAAoBA,CAAIH,CAAC,CAAK,CAClCzB,WAAW,CAACyB,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAC7B,CAAC,CAED,GAAM,CAAAE,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAIJ,CAAC,CAAK,CAC1BA,CAAC,CAACK,cAAc,EAAE,CAClB7B,QAAQ,EAAE,CACZ,CAAC,CAED,oBAAS;AACPZ,KAAA,QAAK0C,SAAS,CAAC,KAAK,CAAAC,QAAA,eAClB7C,IAAA,OAAA6C,QAAA,CAAI,UAAQ,EAAK,cACjB3C,KAAA,SAAM4C,QAAQ,CAAEJ,YAAa,CAACE,SAAS,CAAC,eAAe,CAAAC,QAAA,eACrD7C,IAAA,UAAA6C,QAAA,CAAO,QAAM,EAAQ,cACrB7C,IAAA,UACE+C,IAAI,CAAC,OAAO,CACZP,KAAK,CAAEhC,KAAM,CACbwC,QAAQ,CAAEX,iBAAkB,CAC5BO,SAAS,CAAC,2BAA2B,CACrCK,KAAK,CAAE,CAAEC,KAAK,CAAE,OAAQ,CAAE,EAC1B,cACFhD,KAAA,UAAA2C,QAAA,eAAO7C,IAAA,SAAM,YAAS,GAAQ,cAC9BA,IAAA,UACE+C,IAAI,CAAC,UAAU,CACfP,KAAK,CAAE5B,QAAS,CAChBoC,QAAQ,CAAEP,oBAAqB,CAC/BG,SAAS,CAAC,2BAA2B,CACrCK,KAAK,CAAE,CAAEC,KAAK,CAAE,OAAQ,CAAE,EAC1B,cACFlD,IAAA,SAAM,cACNA,IAAA,WAAQ+C,IAAI,CAAC,QAAQ,CAACH,SAAS,CAAC,iBAAiB,CAAAC,QAAA,CAAC,UAAQ,EAAS,GAC9D,GACH,EAEV,CAEA,cAAe,CAAAzC,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}